<style>.yclone_watch_history_menu{    background: #f8f8f8;    color: #333;    border: solid 1px #d3d3d3;    padding: 5px 10px;    font-weight: bold;    font-size: 11px;    box-shadow: 0 1px 0 rgba(0,0,0,0.05);    cursor: pointer;    border-radius: 2px;    margin-left:10px;    }.playlist_menu_watchhistory{    cursor:pointer;}.playlist_menu_watchhistory:hover{    background:#eee;}.yclone_watch_history_menu:hover{    background-color: buttonface;    border: 1px outset buttonface;}.watch_history_video_title{    font-size: 14px;    margin-top: 5px;    font-weight: bold;    color: #1b7fcc;    text-overflow: ellipsis;    word-wrap: break-word;    cursor:pointer;}.watch_history_video_title:hover{    text-decoration:underline;}.watch_history_channel_title{    font-weight: bold;    cursor:pointer;}.watch_history_channel_title:hover{    text-decoration:underline;    color: #1b7fcc;}.watch_later_property{    margin: 0px 2px 2px 0px;    border-radius: 3px;    right: 0;    bottom: 0;    height:15px;    position: absolute;    padding: 3px;    border: 1px solid #333;    background: rgba(255, 255, 255, 0.5);    cursor:pointer;    display:none;    }.cls_menu_watchhistory{    z-index:10;}@media screen and (max-width: 960px) {#watch_his_rec,  #watch_his_det, #watch_his_vid_det{	clear: left;	float: left !important;	width:90% !important;}}@media screen and (max-width: 480px) {}</style>
<script>$hdwt(document).ready(function(){	 $hdwt('#watch_history_all_checkbox').click(function()      {         if($hdwt(this).is(':checked'))         {             $hdwt('.watchhistory_checkbox').prop('checked', this.checked);         }         else         {             $hdwt('.watchhistory_checkbox').prop('checked', false);         }     });	 $hdwt('.yclone_watch_history_menu').click(function()    {        if($hdwt('.watchhistory_checkbox').is(':checked'))        {            if($hdwt('#content_'+this.id).css('display')=='none')            {                $hdwt('.cls_menu_watchhistory').hide();                $hdwt('#content_'+this.id).show();            }            else            {                $hdwt('.cls_menu_watchhistory').hide();                          }        }    });    $hdwt('.watch_later_property').click(function(){    	var getid = (this.id).split('wlp_')[1];		var getit = (this.id);					$hdwt.post(location.href,{watchlater:getid}, function( data ) {		    if(data=='delete')		    {		    	$hdwt('#'+getit).html('<img src="<?php echo $img_folder_path;?>watch_later.png" style="width:15px; height:15px;">');		    }		    else		    {		    		    	$hdwt('#'+getit).html('<img src="<?php echo $img_folder_path;?>right.png" style="width:15px; height:15px;">');		    }					});		return false;	});	  $hdwt('#btn_romove_watchhistroy').click(function(){	    var ids = '';		 $hdwt('.watchhistory_checkbox').each(function (){	             if($hdwt(this).is(':checked')){	             	ids += '`' + this.id;	             		             }	         });           	         $hdwt.post(location.href, {removevideofromwatchhistroy:ids }, function(){	         	location.reload();	         });         	               });	 $hdwt('.playlist_menu_watchhistory').click(function(){     	var ids = '';     	var playlistid = this.id;     	$hdwt('.watchhistory_checkbox').each(function (){             if($hdwt(this).is(':checked')){             	ids += '`' + this.id;             }         });                 $hdwt.post(location.href, { mngrplaylistadd:playlistid, mngrvideoid:ids }, function(){         	location.reload();         });    });	$hdwt('#btn_clear_history').click(function(){		$hdwt.post(location.href, { clearallwatchhistory: 'clear'}, function(){         	location.reload();         });	});	$hdwt('.watchhistory_watch_later').mouseover(function(){		var getid = (this.id).split('wh_wl_')[1];		$hdwt('#wlp_'+getid).show();			  	}).mouseout(function(){	var getid = (this.id).split('wh_wl_')[1];		$hdwt('#wlp_'+getid).hide();			});	$hdwt('.subscribtion_channel_btn').click(function(){		var get_channelname = (this.id).split('yv_')[1]; 		var get_videoid     = (this.id).split('_yv_')[0];		$hdwt.post(location.href,{subscribechannel:get_videoid,subsc_channel_name:get_channelname}, function( data ) 	    {		   location.reload();				    		});						});		});</script><?php $get_wathchistory_list = $wpdb->get_results($wpdb->prepare("SELECT DISTINCT videoid FROM $watchhistory_table_name WHERE u_channelid=%d",$_SESSION['your_current_channel']));$watch_history .='<div style="font-family: arial,sans-serif; background:#f1f1f1; padding:10px;">';$watch_history .='<div id="watch_his_det" style="float:left; box-shadow: 0 1px 2px rgba(0,0,0,.1); -moz-box-sizing: border-box; width:75%; background:#fff;">';$watch_history .='<div style="padding: 10px 10px 0px 10px; border-bottom: 1px solid #e2e2e2;">';$watch_history .='<div style=" float:left; border-bottom: 2px solid red; color: #333; cursor:pointer; padding-bottom:10px; font-weight: bold; font-size: 12px;">Watch History ('.count($get_wathchistory_list).')</div>';$watch_history .='<div style=" float:right; color: #333; font-weight: bold; font-size: 11px; opacity: .6;"><img src="'.$img_folder_path.'private.jpg" style="width:11px; height:11px;"/>Only you can see your history</div>';$watch_history .='<div style="clear:both;"></div>';$watch_history .='</div>';$watch_history .='<div style="padding: 10px; border-bottom: 1px solid #e2e2e2;">';$watch_history .='<div style="float:left; padding: 2px 10px;" class="yclone_watch_history_menu"><input id="watch_history_all_checkbox" type="checkbox" style="width:15px; height:15px;"/></div>';$watch_history .='<div style="float:left; position:relative;" id="playlist_menu_watchhistory" class="yclone_watch_history_menu">Add to</div>';$watch_history .='<div id="content_playlist_menu_watchhistory" class="cls_menu_watchhistory" style="font-family: arial,sans-serif; background:#fff; margin-left:64px; margin-top: 25px;  position:absolute; display:none; line-height: 25px; width:125px; border:1px solid #ccc; height:150px; overflow:auto; overflow:x-hidden;">';$getwatchlater = $wpdb->get_results($wpdb->prepare("SELECT * FROM $watchlater_table_name WHERE userid=%d AND channelid=%d",$current_user->ID,$_SESSION['your_current_channel']));$watch_history .= '<div style="margin-top:10px;" class="playlist_menu_watchhistory1"><img src="'.$img_folder_path.'private.jpg" style="width:10px; height:10px;"/> Watch Later<span style="color: #bbb; font-size:10px;">('.count($getwatchlater).')</span></div>';$get_playlist = $wpdb->get_results($wpdb->prepare("SELECT * FROM $playlisttitle_table_name WHERE userid=%d AND channelid=%d",$current_user->ID,$_SESSION['your_current_channel']));for($i=0;$i<count($get_playlist);$i++){    $get_playlist_info = $wpdb->get_results("SELECT * from $playlist_table_name WHERE playlistid=".$get_playlist[$i]->id);    $watch_history .= '<div class="playlist_menu_watchhistory" id="'.$get_playlist[$i]->id.'">'.$get_playlist[$i]->playlistname.'<span style="color: #bbb; font-size:10px;">('.count($get_playlist_info).')</span></div>';}$watch_history .= '</div>';$watch_history .='<div style="float:left;" id="btn_romove_watchhistroy" class="yclone_watch_history_menu">Remove</div>';$watch_history .='<div style="float:left;" class="yclone_watch_history_menu" id="btn_clear_history" >Clear all watch history</div>';$watch_history .='<div style="clear:both;"></div>';$watch_history .='</div>';if($get_wathchistory_list){    for($h=0;$h<count($get_wathchistory_list);$h++)    {        $get_video   = $wpdb->get_row("SELECT * FROM $video_table_name WHERE video_id=".$get_wathchistory_list[$h]->videoid);        $get_channel = $wpdb->get_row("SELECT * FROM $channel_table_name WHERE channel_id=".$get_video->channel_id);                $n = date('Y-m-d H:i:s');        $video_upload_time = date_diff(                date_create($get_video->video_upload_time),                date_create($n));                $up_ago = "";        if ($video_upload_time->y > 0) {            $up_ago = $video_upload_time->y . " years ago";        } else        if ($video_upload_time->m > 0) {            $up_ago = $video_upload_time->m . " months ago";        } else        if ($video_upload_time->d > 0) {            $up_ago = $video_upload_time->d . " days ago";        } else        if ($video_upload_time->h > 0) {            $up_ago = $video_upload_time->h . " hours ago";        } else        if ($video_upload_time->m > 0) {            $up_ago = $video_upload_time->m . " mins ago";        } else        if ($video_upload_time->s > 0) {            $up_ago = "Just now";        }                $watch_history .='<div style="padding: 10px; border-bottom: 1px solid #e2e2e2;">';        $watch_history .='<div style="float:left; margin-top:40px; margin-right:10px;"><input class="watchhistory_checkbox" id="'.$get_video->video_id.'" type="checkbox" style="width:15px; height:15px;"/></div>';        $watch_history .='<div class="watchhistory_watch_later" id="wh_wl_'.$get_video->video_id.'" style="float:left; margin-right:10px; position:relative; cursor:pointer; background-size:100%; background-image:url('.$get_video->video_thumpnails.'); width:170px; height:100px;"><div class="watch_later_property" id="wlp_'.$get_video->video_id.'" title="watch later"><img src="'.$img_folder_path.'watch_later.png" style="width:15px; height:15px;"/></div></div>';        $watch_history .='<div id="watch_his_vid_det" style="float:left; height:auto; width: calc(100% - 212px); overflow:hidden;">';        $watch_history .='<div class="watch_history_video_title">'.$get_video->video_title.'</div>';        $watch_history .='<div style="margin:5px 0 0; font-size: 12px;  color: #555; ">by <span class="watch_history_channel_title">'.$get_channel->channel_name.'</span> - '.$up_ago.' - '.$get_video->video_view.' views</div>';        $watch_history .='<div style="margin:5px 0 0; font-size: 12px;  color: #555;">'.$get_video->video_description.'</div>';        $watch_history .='</div><div style="clear:both;"></div>';        $watch_history .='</div>';    }}else {$watch_history .='<div>No videos Found</div>';}$watch_history .='</div>'; /************************ * RECOMMENDED CHANNELS * ************************/$get_tags = $wpdb->get_row($wpdb->prepare("SELECT * FROM $channeltags_table_name WHERE userid=%d AND channelid=%d",$current_user->ID,$_SESSION['your_current_channel']));$all_tags = explode(',', $get_tags->Tags);for($k=1;$k<count($all_tags);$k++){    if($k!=1){        $video_query .= ' OR ';    }    $video_query .= 'video_title LIKE "%'.$all_tags[$k].'%" OR video_tags LIKE "%'.$all_tags[$k].'%" ';}$query ="SELECT channel_id FROM $video_table_name WHERE ".$video_query." AND channel_id NOT IN(SELECT subsc_channel_id FROM $subscribtion_table_name WHERE channel_id = %d) GROUP BY channel_id";$get_channel_list = $wpdb->get_results($wpdb->prepare($query,$_SESSION['your_current_channel']));$watch_history .='<div id="watch_his_rec" style="float:left; box-shadow: 0 1px 2px rgba(0,0,0,.1); -moz-box-sizing: border-box; background:#fff; margin-left:10px; width:calc(25% - 30px); padding:10px;">';$watch_history .='<div style="font-weight: bold; color: #333; font-size: 16px;">Recommended Channels</div>';for($i=0;$i<count($get_channel_list);$i++){    $get_channel = $wpdb->get_row("SELECT * FROM $channel_table_name WHERE channel_id=".$get_channel_list[$i]->channel_id);    $get_subscr = $wpdb->get_row("SELECT * FROM $subscribtion_table_name WHERE subsc_channel_id=".$get_channel_list[$i]->channel_id);           $watch_history .='<div style="margin-top: 10px;">';    $watch_history .='<div style="float: left;"><img src="'.$get_channel->channel_icon.'" style="width: 30px; height: 30px;" /></div>';    $watch_history .='<div style="margin-left: 10px; float: left;">';    $watch_history .='<span style="color: #2793e6; font-weight: bold; font-size: 11px;">'.$get_channel->channel_name.'</span><br>';    $watch_history .='<div style="display: inline-block; border: 1px solid #999; cursor: pointer; border-radius: 2px; padding: 0px 5px 0px 5px; background-color: rgb(245, 245, 245); font-size: 11px;" class="subscribtion_channel_btn" id="'.$get_channel->channel_id.'_yv_'.$get_channel->channel_name.'">subscribe</div>';    $watch_history .='</div><div style="clear: both;"></div>';    $watch_history .='</div>';    }$watch_history .='</div><div style="clear:both;"></div>';$watch_history .='</div>';?>